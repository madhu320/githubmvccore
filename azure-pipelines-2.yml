 
variables:
    - name: yamlvar
      value : i am yaml variable
    - group : somevargroup
pool:
  name: Default


stages:
  - stage: DevStage
    jobs:
      - job: getlatest
        steps:
          - script: |
             echo $(yamlvar)
             echo $(inputvar)
             echo $(vargroup1)
             echo "##vso[task.setvariable variable=yamlvar;isOutput=true]this yaml var is changed"
             echo $(yamlvar)
            displayName: Step1
            name: StepName1
          - script: |
             echo $(StepName1.yamlvar)
            displayName: Step2 
            name: StepName2

      - job: buildstage
        dependsOn: getlatest
        variables:
          buildstagevar: $[ dependencies.getlatest.outputs['StepName1.yamlvar']]
        steps:
          - script : |
             echo $(buildstagevar)
            displayName: Step3
            name: StepName3

  - stage: TestStage
    dependsOn: DevStage
    jobs:
      - job: preparingingdata
        variables:
            teststagevar1 : $[ stageDependencies.DevStage.getlatest.outputs['StepName1.yamlvar'] ]
        steps:
          - script: 
             echo $(teststagevar1)
            displayName: Step4
            name: StepName4


